# Lagrange.OneBot 消息结构声明
# https://github.com/botuniverse/onebot-11
# PS：解析中可以使用 jsonpath，左斜杠开头则表示为当前位置

# Bot 名称
name: Lagrange.OneBot

# Bot 版本信息
version_info: $.data
# 登录信息
login_info:
    uin: $.data.user_id
    bkn: ''
    nickname: $.data.nickname
# 群、好友列表
user_list:
    name: get_friend_list|get_group_list
    source: $.data[*]
    list:
        group_id: /group_id
        group_name: /group_name
        member_count: /member_count
        admin_flag: null

        class_id: $.group.group_id
        class_name: $.group.group_name
        user_id: /user_id
        nickname: /nickname
        remark: /remark
# 收藏表情
roaming_stamp:
    name: fetch_custom_face
    reverse: true
# 消息列表
message_list:
    name: get_group_msg_history
    private_name: get_friend_msg_history
    source: $.data.messages[*]
    type: $.data
    message_type:
        user: private
        group: group
    list:
        message_id: /message_id
        target_id: /target_id
        message_type: /message_type
        time: /time
        post_type: null
        group_id: /group_id
        sender: /sender
        message: /message
        raw_message: /raw_message
# 转发消息体
forward_msg:
    name: get_forward_msg
    source: $.data.message[*].data
# 消息基础信息
message_info:
    message_id: $.message_id
    private_id: $.user_id
    group_id: $.group_id
    target_id: $.target_id
    sender: $.sender.user_id
# 获取消息体
message_value: # 这是消息转义，防止某些消息字段不同
    image:
        url: $.file
# 获取群公告
group_notices:
    name: _get_group_notice
    source: $.data[*]
    list:
        content: $.message.text
        sender: $.sender_id
        time: $.publish_time
        img_id: $.message.images.0.id
        is_read: null
        read_num: null
# 发送群合并转发
send_group_forward:
    name: send_group_forward_msg
    source: $.data
    message_id: $.message_id
# 私聊合并转发
send_private_forward:
    name: send_group_forward_msg
    source: $.data
    message_id: $.message_id

# 历史消息
get_group_msg_history:
    name: get_group_msg_history
    source: $.data.messages[*]
    type: $.data
    message_type:
        user: private
        group: group
    list:
        message_id: /message_id
        target_id: /target_id
        message_type: /message_type
        time: /time
        post_type: null
        group_id: /group_id
        sender: /sender
        message: /message
        raw_message: /raw_message
get_friend_msg_history:
    name: get_friend_msg_history
    source: $.data.messages[*]
    type: $.data
    message_type:
        user: private
        group: group
    list:
        message_id: /message_id
        target_id: /target_id
        message_type: /message_type
        time: /time
        post_type: null
        group_id: /group_id
        sender: /sender
        message: /message
        raw_message: /raw_message