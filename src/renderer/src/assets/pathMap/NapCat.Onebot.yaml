# NapCat.Onbot/LLOneBot 消息结构声明
# https://napneko.github.io/zh-CN/develop/api
# PS：解析中可以使用 jsonpath，左斜杠开头则表示为当前位置

# Bot 名称
name: NapCat.Onebot

# Bot 版本信息
version_info: $.data
# 登录信息
login_info:
    uin: $.data.user_id
    bkn: ''
    nickname: $.data.nickname
# 群、好友列表
group_list:
    name: get_group_list
    source: $.data[*]
    list:
        group_id: /group_id
        group_name: /group_name
        member_count: /member_count
        admin_flag: null
# 好友分组
friend_category:
    name: get_friends_with_category
    source: $.data[*]
    list:
        class_id: /categoryId
        class_name: /categoryName
        # 不知道注释的对不对
        # sort_id: /categorySortId
        user_ids: $.buddyList[*].user_id
        user_nicknames: $.buddyList[*].nickname
        user_remark: $.buddyList[*].remark
# 群/好友信息
friend_info:
    name: get_stranger_info
    source: $.data
    list:
        longNick: /longNick             # 签名
        qid: /qid                       # 个性 QQ 账号
        country: /country               # 国家
        province: /province             # 省份
        city: /city                     # 城市
        regTime: /regTime               # 注册时间
        qqLevel: /qqLevel               # QQ 等级
        birthday_year: /birthday_year   # 生日年份
        birthday_month: /birthday_month # 生日月份
        birthday_day: /birthday_day     # 生日日期
        age: /age                       # 年龄
        sex: /sex                       # 性别
# 消息列表
message_list:
    name: get_group_msg_history
    private_name: get_friend_msg_history
    source: $.data.messages[*]
    type: $.data
    message_type:
        user: private
        group: group
    list:
        message_id: /message_id
        target_id: /target_id
        message_type: /message_type
        time: /time
        post_type: /post_type
        group_id: /group_id
        sender: /sender
        message: /message
        raw_message: /raw_message
# 转发消息体
forward_msg:
    name: get_forward_msg
    source: $.data.messages[*]
    list:
        message_id: /message_id
        target_id: null
        message_type: /message_type
        time: /time
        post_type: /post_type
        group_id: /group_id
        sender: /sender
        message: /message
        raw_message: null
# 消息基础信息
message_info:
    message_id: $.message_id
    private_id: $.user_id
    group_id: $.group_id
    target_id: $.target_id
    sender: $.sender.user_id
# 获取消息体
message_value:
    file:
        name: $.file
# 设置消息已读
set_group_message_read:
    name: mark_group_msg_as_read
set_user_message_read:
    name: mark_private_msg_as_read
# 设置消息回应
send_respond:
    name: set_msg_emoji_like
# 获取群公告
group_notices:
    name: _get_group_notice
    source: $.data[*]
    list:
        content: $.message.text
        sender: /sender_id
        time: /publish_time
        img_id: $.message.image.0.id
        is_read: null
        read_num: null
# 获取群精华消息
group_essence:
    name: get_essence_msg_list
    source: $.data[*]
    list:
        sender_id: /sender_id
        sender_nick: /sender_nick
        sender_time: /operator_time
        content: /content
        operator_id: /operator_id
        operator_nick: /operator_nick
        operator_time: /operator_time
# 获取群成员信息
group_member_info:
    name: get_group_member_info
    source: $.data
    list:
        group_id: /group_id
        user_id: /user_id
        nickname: /nickname
        card: /card
        sex: /sex
        age: /age
        join_time: /join_time
        last_sent_time: /last_sent_time
        is_robot: /is_robot
        shut_up_timestamp: /shut_up_timestamp
        role: /role
# 获取收藏表情
roaming_stamp:
    name: fetch_custom_face
    pagerType: full
# 获取历史会话
recent_contact:
    name: get_recent_contact
    source: $.data[*]
    list:
        user_id: /peerUin
        time: /msgTime
        chat_type: /chatType
        name: /peerName
# 戳一戳
poke:
    name: group_poke
    private_name: friend_poke

## 文件
# 获取群文件主列表
group_files:
    name: get_group_root_files
    source: $.data.*[*]
    list:
        # 文件类型
        file_id: /file_id                   # 文件 ID
        file_name: /file_name               # 文件名
        size: /size                         # 文件大小
        download_times: /download_times     # 下载次数
        dead_time: /dead_time               # 过期时间
        upload_time: /modify_time           # 上传时间
        uploader_name: /uploader_name       # 上传者
        # 文件夹类型
        folder_id: /folder_id               # 文件夹 ID
        folder_name: /folder_name           # 文件夹名
        count: /total_file_count            # 文件数量
        create_time: /create_time           # 创建时间
        creater_name: /creator_name         # 创建者
# 获取群文件夹内文件
group_folder_files:
    name: get_group_files_by_folder
    source: $.data.*[*]
    list:
        # 文件类型
        file_id: /file_id                   # 文件 ID
        file_name: /file_name               # 文件名
        size: /size                         # 文件大小
        download_times: /download_times     # 下载次数
        dead_time: /dead_time               # 过期时间
        upload_time: /modify_time           # 上传时间
        uploader_name: /uploader_name       # 上传者
        # 文件夹类型
        folder_id: /folder_id               # 文件夹 ID
        folder_name: /folder_name           # 文件夹名
        count: /total_file_count            # 文件数量
        create_time: /create_time           # 创建时间
        creater_name: /creator_name         # 创建者
# 获取文件下载信息
get_file_url:
    name: get_file
    file_url: $.data.url
get_group_file_url:
    name: get_file
    file_url: $.data.url
get_private_file_url:
    name: get_file
    file_url: $.data.url

# 发送群合并转发
# 不知道能不能用,nc的apifox有问题,data里有啥不知道
send_group_forward:
    name: send_forward_msg
    source: $.data
    message_id: $.message_id
# 私聊合并转发
send_private_forward:
    name: send_forward_msg
    source: $.data
    message_id: $.message_id

# 历史消息
get_group_msg_history:
    name: get_group_msg_history
    source: $.data.messages[*]
    type: $.data
    message_type:
        user: private
        group: group
    list:
        message_id: /message_id
        target_id: /target_id
        message_type: /message_type
        time: /time
        post_type: /post_type
        group_id: /group_id
        sender: /sender
        message: /message
        raw_message: /raw_message
get_friend_msg_history:
    name: get_friend_msg_history
    source: $.data.messages[*]
    type: $.data
    message_type:
        user: private
        group: group
    list:
        message_id: /message_id
        target_id: /target_id
        message_type: /message_type
        time: /time
        post_type: /post_type
        group_id: /group_id
        sender: /sender
        message: /message
        raw_message: /raw_message
# 禁言列表
ban_list:
    name: get_group_shut_list
    source: $.data[*]
    list:
        user_id: /uin
        ban_time: /shutUpTime
